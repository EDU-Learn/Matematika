<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Materi Bangun Ruang Tabung</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        .canvas-container {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: #f9fafb;
        }
        .formula-box {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            color: #212529;
            margin: 16px 0;
        }
        .example-box {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            color: #212529;
            margin: 16px 0;
        }
        .practice-box {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            color: #212529;
            margin: 16px 0;
        }
        .guided-box {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            color: #212529;
            margin: 16px 0;
        }
        .step-box {
            background: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #007bff;
        }
        .answer-box {
            background: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
        }
        .btn-primary {
            background: #007bff;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s;
        }
        .btn-primary:hover {
            background: #0056b3;
        }
        .btn-secondary {
            background: #6c757d;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        .btn-secondary:hover {
            background: #545b62;
        }
        .input-field {
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 16px;
            width: 100px;
            text-align: center;
        }
        .input-field:focus {
            outline: none;
            border-color: #667eea;
        }
        .tab-button {
            padding: 12px 24px;
            border: 1px solid #dee2e6;
            background: #ffffff;
            color: #495057;
            cursor: pointer;
            border-radius: 6px 6px 0 0;
            font-weight: 600;
            transition: all 0.3s;
        }
        .tab-button.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="bg-gray-50 min-h-full">
  <header class="bg-white shadow-sm border-b-2 border-blue-200">
   <div class="max-w-6xl mx-auto px-6 py-4">
    <h1 id="main-title" class="text-3xl font-bold text-gray-800">Bangun Ruang: Tabung</h1>
    <p id="subtitle" class="text-lg text-gray-600 mt-2">Luas Permukaan dan Volume Tabung</p>
   </div>
  </header>
  <main class="max-w-6xl mx-auto px-6 py-8"><!-- Tab Navigation -->
   <div class="flex space-x-2 mb-6"><button class="tab-button active" onclick="showTab('materi')">üìö Materi</button> <button class="tab-button" onclick="showTab('contoh')">üí° Contoh Soal</button> <button class="tab-button" onclick="showTab('terbimbing')">üéØ Latihan Terbimbing</button> <button class="tab-button" onclick="showTab('latihan')">‚úèÔ∏è Latihan Soal</button>
   </div><!-- Materi Tab -->
   <div id="materi" class="tab-content active">
    <div class="grid md:grid-cols-2 gap-8">
     <div>
      <h2 class="text-2xl font-bold text-gray-800 mb-4">Visualisasi Tabung</h2>
      <div class="canvas-container">
       <canvas id="cylinderCanvas" width="400" height="300"></canvas>
      </div>
      <div class="mt-4 text-center"><label for="radiusSlider" class="block text-sm font-medium text-gray-700 mb-2">Jari-jari (r): <span id="radiusValue">5</span> cm</label> <input type="range" id="radiusSlider" min="3" max="8" value="5" class="w-full"> <label for="heightSlider" class="block text-sm font-medium text-gray-700 mb-2 mt-4">Tinggi (t): <span id="heightValue">8</span> cm</label> <input type="range" id="heightSlider" min="5" max="12" value="8" class="w-full">
      </div>
     </div>
     <div>
      <h2 class="text-2xl font-bold text-gray-800 mb-4">Rumus-rumus Tabung</h2>
      <div class="formula-box">
       <h3 class="text-xl font-bold mb-3">üîµ Luas Permukaan Tabung</h3>
       <div class="text-lg mb-2">
        $$L = 2\pi r^2 + 2\pi rt$$
       </div>
       <div class="text-lg">
        $$L = 2\pi r(r + t)$$
       </div>
       <p class="text-sm mt-3 opacity-90">Dimana: r = jari-jari, t = tinggi</p>
      </div>
      <div class="formula-box">
       <h3 class="text-xl font-bold mb-3">üì¶ Volume Tabung</h3>
       <div class="text-lg">
        $$V = \pi r^2 t$$
       </div>
       <p class="text-sm mt-3 opacity-90">Dimana: r = jari-jari, t = tinggi</p>
      </div>
      <div class="bg-yellow-100 border-l-4 border-yellow-500 p-4 mt-4 rounded">
       <h4 class="font-bold text-yellow-800">üí° Tips Penting:</h4>
       <ul class="text-yellow-700 mt-2 space-y-1">
        <li>‚Ä¢ Jika jari-jari kelipatan 7, gunakan œÄ = 22/7</li>
        <li>‚Ä¢ Jika tidak, gunakan œÄ = 3,14</li>
        <li>‚Ä¢ Pastikan satuan sama untuk semua ukuran</li>
       </ul>
      </div>
     </div>
    </div>
   </div><!-- Contoh Soal Tab -->
   <div id="contoh" class="tab-content">
    <div class="example-box">
     <h2 class="text-2xl font-bold mb-4">üí° Contoh Soal</h2>
     <div class="mb-4">
      <h3 class="text-lg font-semibold mb-3">Pilih topik contoh soal:</h3>
      <div class="grid grid-cols-2 md:grid-cols-3 gap-2 mb-4"><button class="btn-secondary text-sm" onclick="generateExample('surface')">üîµ Luas Permukaan</button> <button class="btn-secondary text-sm" onclick="generateExample('volume')">üì¶ Volume</button> <button class="btn-secondary text-sm" onclick="generateExample('height_from_surface')">üìê t dari L &amp; r</button> <button class="btn-secondary text-sm" onclick="generateExample('radius_from_volume')">üìè r dari V &amp; t</button> <button class="btn-secondary text-sm" onclick="generateExample('height_from_volume')">üìê t dari V &amp; r</button> <button class="btn-secondary text-sm" onclick="generateExample('random')">üé≤ Acak</button>
      </div>
     </div>
     <div class="grid md:grid-cols-2 gap-6">
      <div>
       <div id="exampleProblem" class="step-box">
        <p class="font-semibold">Pilih topik di atas untuk melihat contoh soal...</p>
       </div>
      </div>
      <div><button class="btn-secondary mb-4" onclick="showExampleSolution()" id="showSolutionBtn">üëÅÔ∏è Tampilkan Penyelesaian</button>
       <div id="exampleSolution" class="answer-box" style="display: none;">
        <p>Penyelesaian akan muncul di sini...</p>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Latihan Terbimbing Tab -->
   <div id="terbimbing" class="tab-content">
    <div class="guided-box">
     <h2 class="text-2xl font-bold mb-4">üéØ Latihan Terbimbing</h2>
     <div class="mb-4">
      <h3 class="text-lg font-semibold mb-3">Pilih topik yang ingin dipelajari:</h3>
      <div class="grid grid-cols-2 md:grid-cols-3 gap-2 mb-4"><button class="btn-secondary text-sm" onclick="generateGuidedProblem('surface')">üîµ Luas Permukaan</button> <button class="btn-secondary text-sm" onclick="generateGuidedProblem('volume')">üì¶ Volume</button> <button class="btn-secondary text-sm" onclick="generateGuidedProblem('height_from_surface')">üìê t dari L &amp; r</button> <button class="btn-secondary text-sm" onclick="generateGuidedProblem('radius_from_volume')">üìè r dari V &amp; t</button> <button class="btn-secondary text-sm" onclick="generateGuidedProblem('height_from_volume')">üìê t dari V &amp; r</button> <button class="btn-secondary text-sm" onclick="generateGuidedProblem('random')">üé≤ Acak</button>
      </div>
     </div>
     <div id="guidedProblem" class="step-box">
      <p class="font-semibold">Pilih topik di atas untuk memulai latihan terbimbing...</p>
     </div>
     <div id="guidedSteps" style="display: none;">
      <div class="step-box">
       <h4 class="font-bold mb-2">Langkah 1: Identifikasi yang diketahui</h4>
       <div id="step1Content"></div><button class="btn-secondary mt-2" onclick="showStep(1)" id="step1Btn">Tampilkan</button>
      </div>
      <div class="step-box">
       <h4 class="font-bold mb-2">Langkah 2: Tentukan rumus yang digunakan</h4>
       <div id="step2Content" style="display: none;"></div><button class="btn-secondary mt-2" onclick="showStep(2)" id="step2Btn" style="display: none;">Tampilkan</button>
      </div>
      <div class="step-box">
       <h4 class="font-bold mb-2">Langkah 3: Substitusi nilai ke rumus</h4>
       <div id="step3Content" style="display: none;"></div><button class="btn-secondary mt-2" onclick="showStep(3)" id="step3Btn" style="display: none;">Tampilkan</button>
      </div>
      <div class="step-box">
       <h4 class="font-bold mb-2">Langkah 4: Hitung hasil akhir</h4>
       <div id="step4Content" style="display: none;"></div><button class="btn-secondary mt-2" onclick="showStep(4)" id="step4Btn" style="display: none;">Tampilkan</button>
      </div>
     </div>
    </div>
   </div><!-- Latihan Soal Tab -->
   <div id="latihan" class="tab-content">
    <div class="practice-box">
     <h2 class="text-2xl font-bold mb-4">‚úèÔ∏è Latihan Soal</h2>
     <div class="mb-4"><button class="btn-secondary" onclick="generateAllPractice()">üé≤ Generate 8 Soal Baru</button>
      <p class="text-sm text-gray-600 mt-2">8 soal: 2 luas permukaan, 2 volume, 2 cari t dari L, 1 cari r dari V, 1 cari t dari V</p>
     </div>
     <div id="practiceContainer">
      <p class="text-center text-gray-600 py-8">Klik "Generate 10 Soal Baru" untuk memulai latihan...</p>
     </div>
    </div>
   </div>
  </main>
  <script>
        // Configuration object for Element SDK
        const defaultConfig = {
            main_title: "Bangun Ruang: Tabung",
            subtitle: "Luas Permukaan dan Volume Tabung"
        };

        let currentExampleData = null;
        let currentGuidedData = null;
        let currentPracticeData = null;
        let currentStep = 0;

        // Initialize MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };

        // Element SDK implementation
        const element = {
            defaultConfig: defaultConfig,
            onConfigChange: async (config) => {
                document.getElementById('main-title').textContent = config.main_title || defaultConfig.main_title;
                document.getElementById('subtitle').textContent = config.subtitle || defaultConfig.subtitle;
            },
            mapToCapabilities: (config) => ({
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            }),
            mapToEditPanelValues: (config) => new Map([
                ["main_title", config.main_title || defaultConfig.main_title],
                ["subtitle", config.subtitle || defaultConfig.subtitle]
            ])
        };

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init(element);
        }

        // Tab functionality
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => button.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Canvas drawing functions
        function drawCylinder() {
            const canvas = document.getElementById('cylinderCanvas');
            const ctx = canvas.getContext('2d');
            const radius = parseInt(document.getElementById('radiusSlider').value);
            const height = parseInt(document.getElementById('heightSlider').value);
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Set up drawing parameters
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const scaleR = radius * 15;
            const scaleH = height * 12;
            
            // Draw cylinder
            ctx.strokeStyle = '#4f46e5';
            ctx.fillStyle = 'rgba(79, 70, 229, 0.1)';
            ctx.lineWidth = 2;
            
            // Top ellipse
            ctx.beginPath();
            ctx.ellipse(centerX, centerY - scaleH/2, scaleR, scaleR/3, 0, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            
            // Bottom ellipse
            ctx.beginPath();
            ctx.ellipse(centerX, centerY + scaleH/2, scaleR, scaleR/3, 0, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            
            // Side lines
            ctx.beginPath();
            ctx.moveTo(centerX - scaleR, centerY - scaleH/2);
            ctx.lineTo(centerX - scaleR, centerY + scaleH/2);
            ctx.moveTo(centerX + scaleR, centerY - scaleH/2);
            ctx.lineTo(centerX + scaleR, centerY + scaleH/2);
            ctx.stroke();
            
            // Draw radius line on bottom base
            ctx.strokeStyle = '#dc2626';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY + scaleH/2);
            ctx.lineTo(centerX + scaleR, centerY + scaleH/2);
            ctx.stroke();
            
            // Draw small circle at center of bottom base
            ctx.fillStyle = '#dc2626';
            ctx.beginPath();
            ctx.arc(centerX, centerY + scaleH/2, 3, 0, 2 * Math.PI);
            ctx.fill();
            
            // Draw height line on the side
            ctx.strokeStyle = '#059669';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(centerX - scaleR - 20, centerY - scaleH/2);
            ctx.lineTo(centerX - scaleR - 20, centerY + scaleH/2);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Draw arrows for height
            ctx.strokeStyle = '#059669';
            ctx.lineWidth = 1;
            ctx.beginPath();
            // Top arrow
            ctx.moveTo(centerX - scaleR - 20, centerY - scaleH/2);
            ctx.lineTo(centerX - scaleR - 25, centerY - scaleH/2 + 5);
            ctx.moveTo(centerX - scaleR - 20, centerY - scaleH/2);
            ctx.lineTo(centerX - scaleR - 15, centerY - scaleH/2 + 5);
            // Bottom arrow
            ctx.moveTo(centerX - scaleR - 20, centerY + scaleH/2);
            ctx.lineTo(centerX - scaleR - 25, centerY + scaleH/2 - 5);
            ctx.moveTo(centerX - scaleR - 20, centerY + scaleH/2);
            ctx.lineTo(centerX - scaleR - 15, centerY + scaleH/2 - 5);
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#1f2937';
            ctx.font = '14px Arial';
            
            // Radius label (on the bottom base)
            ctx.fillStyle = '#dc2626';
            ctx.fillText(`r = ${radius} cm`, centerX + scaleR/2 - 25, centerY + scaleH/2 - 8);
            
            // Height label (on the side)
            ctx.fillStyle = '#059669';
            ctx.save();
            ctx.translate(centerX - scaleR - 35, centerY);
            ctx.rotate(-Math.PI/2);
            ctx.fillText(`t = ${height} cm`, -25, 5);
            ctx.restore();
            
            // Update display values
            document.getElementById('radiusValue').textContent = radius;
            document.getElementById('heightValue').textContent = height;
        }

        // Slider event listeners
        document.getElementById('radiusSlider').addEventListener('input', drawCylinder);
        document.getElementById('heightSlider').addEventListener('input', drawCylinder);

        // Generate random values for problems
        function generateRandomValues() {
            const radiusOptions = [7, 14, 21, 28, 35, 5, 6, 8, 9, 10, 12, 15];
            const heightOptions = [6, 8, 10, 12, 14, 16, 18, 20, 24, 28];
            
            const radius = radiusOptions[Math.floor(Math.random() * radiusOptions.length)];
            const height = heightOptions[Math.floor(Math.random() * heightOptions.length)];
            const pi = (radius % 7 === 0) ? "22/7" : "3.14";
            const piValue = (radius % 7 === 0) ? 22/7 : 3.14;
            
            return { radius, height, pi, piValue };
        }

        // Generate example problem
        function generateExample(topicChoice = 'random') {
            const data = generateRandomValues();
            let problemType;
            
            const problemTypes = ['surface', 'volume', 'height_from_surface', 'radius_from_volume', 'height_from_volume'];
            
            if (problemTypes.includes(topicChoice)) {
                problemType = topicChoice;
            } else {
                problemType = problemTypes[Math.floor(Math.random() * problemTypes.length)];
            }
            
            let problemText = '';
            let givenData = { ...data };
            
            if (problemType === 'surface') {
                problemText = `Sebuah tabung memiliki jari-jari ${data.radius} cm dan tinggi ${data.height} cm. Hitunglah luas permukaan tabung tersebut! (œÄ = ${data.pi})`;
            } else if (problemType === 'volume') {
                problemText = `Sebuah tabung memiliki jari-jari ${data.radius} cm dan tinggi ${data.height} cm. Hitunglah volume tabung tersebut! (œÄ = ${data.pi})`;
            } else if (problemType === 'height_from_surface') {
                const surfaceArea = 2 * data.piValue * data.radius * (data.radius + data.height);
                givenData.surfaceArea = surfaceArea;
                problemText = `Sebuah tabung memiliki luas permukaan ${surfaceArea.toFixed(2)} cm¬≤ dan jari-jari ${data.radius} cm. Hitunglah tinggi tabung tersebut! (œÄ = ${data.pi})`;
            } else if (problemType === 'radius_from_volume') {
                const volume = data.piValue * data.radius * data.radius * data.height;
                givenData.volume = volume;
                problemText = `Sebuah tabung memiliki volume ${volume.toFixed(2)} cm¬≥ dan tinggi ${data.height} cm. Hitunglah jari-jari tabung tersebut! (œÄ = ${data.pi})`;
            } else if (problemType === 'height_from_volume') {
                const volume = data.piValue * data.radius * data.radius * data.height;
                givenData.volume = volume;
                problemText = `Sebuah tabung memiliki volume ${volume.toFixed(2)} cm¬≥ dan jari-jari ${data.radius} cm. Hitunglah tinggi tabung tersebut! (œÄ = ${data.pi})`;
            }
            
            currentExampleData = { ...givenData, type: problemType };
            
            document.getElementById('exampleProblem').innerHTML = `<p class="font-semibold">${problemText}</p>`;
            document.getElementById('exampleSolution').style.display = 'none';
            document.getElementById('showSolutionBtn').textContent = 'üëÅÔ∏è Tampilkan Penyelesaian';
        }

        // Show example solution
        function showExampleSolution() {
            if (!currentExampleData) {
                generateExample();
                return;
            }
            
            const solutionDiv = document.getElementById('exampleSolution');
            const btn = document.getElementById('showSolutionBtn');
            
            if (solutionDiv.style.display === 'none') {
                const { radius, height, pi, piValue, type, surfaceArea, volume } = currentExampleData;
                
                let solution = '';
                if (type === 'surface') {
                    const result = 2 * piValue * radius * (radius + height);
                    solution = `
                        <h4 class="font-bold mb-2">Penyelesaian Luas Permukaan:</h4>
                        <p><strong>Diketahui:</strong> r = ${radius} cm, t = ${height} cm, œÄ = ${pi}</p>
                        <p><strong>Rumus:</strong> L = 2œÄr(r + t)</p>
                        <p><strong>Penyelesaian:</strong></p>
                        <p>L = 2 √ó ${pi} √ó ${radius} √ó (${radius} + ${height}) = ${result.toFixed(2)} cm¬≤</p>
                    `;
                } else if (type === 'volume') {
                    const result = piValue * radius * radius * height;
                    solution = `
                        <h4 class="font-bold mb-2">Penyelesaian Volume:</h4>
                        <p><strong>Diketahui:</strong> r = ${radius} cm, t = ${height} cm, œÄ = ${pi}</p>
                        <p><strong>Rumus:</strong> V = œÄr¬≤t</p>
                        <p><strong>Penyelesaian:</strong></p>
                        <p>V = ${pi} √ó ${radius}¬≤ √ó ${height} = ${result.toFixed(2)} cm¬≥</p>
                    `;
                } else if (type === 'height_from_surface') {
                    solution = `
                        <h4 class="font-bold mb-2">Penyelesaian Mencari Tinggi dari Luas Permukaan:</h4>
                        <p><strong>Diketahui:</strong> L = ${surfaceArea.toFixed(2)} cm¬≤, r = ${radius} cm, œÄ = ${pi}</p>
                        <p><strong>Rumus:</strong> L = 2œÄr(r + t)</p>
                        <p><strong>Penyelesaian:</strong></p>
                        <p>${surfaceArea.toFixed(2)} = 2 √ó ${pi} √ó ${radius} √ó (${radius} + t)</p>
                        <p>${surfaceArea.toFixed(2)} = ${2 * piValue * radius} √ó (${radius} + t)</p>
                        <p>${radius} + t = ${surfaceArea.toFixed(2)} √∑ ${2 * piValue * radius}</p>
                        <p>${radius} + t = ${(surfaceArea / (2 * piValue * radius)).toFixed(2)}</p>
                        <p><strong>t = ${height} cm</strong></p>
                    `;
                } else if (type === 'radius_from_volume') {
                    solution = `
                        <h4 class="font-bold mb-2">Penyelesaian Mencari Jari-jari dari Volume:</h4>
                        <p><strong>Diketahui:</strong> V = ${volume.toFixed(2)} cm¬≥, t = ${height} cm, œÄ = ${pi}</p>
                        <p><strong>Rumus:</strong> V = œÄr¬≤t</p>
                        <p><strong>Penyelesaian:</strong></p>
                        <p>${volume.toFixed(2)} = ${pi} √ó r¬≤ √ó ${height}</p>
                        <p>r¬≤ = ${volume.toFixed(2)} √∑ (${pi} √ó ${height})</p>
                        <p>r¬≤ = ${volume.toFixed(2)} √∑ ${(piValue * height).toFixed(2)}</p>
                        <p>r¬≤ = ${(volume / (piValue * height)).toFixed(2)}</p>
                        <p><strong>r = ${radius} cm</strong></p>
                    `;
                } else if (type === 'height_from_volume') {
                    solution = `
                        <h4 class="font-bold mb-2">Penyelesaian Mencari Tinggi dari Volume:</h4>
                        <p><strong>Diketahui:</strong> V = ${volume.toFixed(2)} cm¬≥, r = ${radius} cm, œÄ = ${pi}</p>
                        <p><strong>Rumus:</strong> V = œÄr¬≤t</p>
                        <p><strong>Penyelesaian:</strong></p>
                        <p>${volume.toFixed(2)} = ${pi} √ó ${radius}¬≤ √ó t</p>
                        <p>${volume.toFixed(2)} = ${pi} √ó ${radius * radius} √ó t</p>
                        <p>t = ${volume.toFixed(2)} √∑ ${(piValue * radius * radius).toFixed(2)}</p>
                        <p><strong>t = ${height} cm</strong></p>
                    `;
                }
                
                solutionDiv.innerHTML = solution;
                solutionDiv.style.display = 'block';
                btn.textContent = 'üôà Sembunyikan Penyelesaian';
            } else {
                solutionDiv.style.display = 'none';
                btn.textContent = 'üëÅÔ∏è Tampilkan Penyelesaian';
            }
        }

        // Generate guided problem
        function generateGuidedProblem(topicChoice = 'random') {
            const data = generateRandomValues();
            let problemType;
            
            const problemTypes = ['surface', 'volume', 'height_from_surface', 'radius_from_volume', 'height_from_volume'];
            
            if (problemTypes.includes(topicChoice)) {
                problemType = topicChoice;
            } else {
                problemType = problemTypes[Math.floor(Math.random() * problemTypes.length)];
            }
            
            let problemText = '';
            let givenData = { ...data };
            
            if (problemType === 'surface') {
                problemText = `Sebuah tabung memiliki jari-jari ${data.radius} cm dan tinggi ${data.height} cm. Hitunglah luas permukaan tabung tersebut! (œÄ = ${data.pi})`;
            } else if (problemType === 'volume') {
                problemText = `Sebuah tabung memiliki jari-jari ${data.radius} cm dan tinggi ${data.height} cm. Hitunglah volume tabung tersebut! (œÄ = ${data.pi})`;
            } else if (problemType === 'height_from_surface') {
                const surfaceArea = 2 * data.piValue * data.radius * (data.radius + data.height);
                givenData.surfaceArea = surfaceArea;
                problemText = `Sebuah tabung memiliki luas permukaan ${surfaceArea.toFixed(2)} cm¬≤ dan jari-jari ${data.radius} cm. Hitunglah tinggi tabung tersebut! (œÄ = ${data.pi})`;
            } else if (problemType === 'radius_from_volume') {
                const volume = data.piValue * data.radius * data.radius * data.height;
                givenData.volume = volume;
                problemText = `Sebuah tabung memiliki volume ${volume.toFixed(2)} cm¬≥ dan tinggi ${data.height} cm. Hitunglah jari-jari tabung tersebut! (œÄ = ${data.pi})`;
            } else if (problemType === 'height_from_volume') {
                const volume = data.piValue * data.radius * data.radius * data.height;
                givenData.volume = volume;
                problemText = `Sebuah tabung memiliki volume ${volume.toFixed(2)} cm¬≥ dan jari-jari ${data.radius} cm. Hitunglah tinggi tabung tersebut! (œÄ = ${data.pi})`;
            }
            
            currentGuidedData = { ...givenData, type: problemType };
            currentStep = 0;
            
            document.getElementById('guidedProblem').innerHTML = `<p class="font-semibold">${problemText}</p>`;
            document.getElementById('guidedSteps').style.display = 'block';
            
            // Reset all steps
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`step${i}Content`).style.display = 'none';
                document.getElementById(`step${i}Btn`).style.display = i === 1 ? 'inline-block' : 'none';
            }
        }

        // Show guided steps
        function showStep(step) {
            if (!currentGuidedData) return;
            
            const { radius, height, pi, piValue, type, surfaceArea, volume } = currentGuidedData;
            
            if (step === 1) {
                let knownData = '';
                let question = '';
                
                if (type === 'surface') {
                    knownData = `<p>‚Ä¢ Jari-jari (r) = ${radius} cm</p><p>‚Ä¢ Tinggi (t) = ${height} cm</p><p>‚Ä¢ œÄ = ${pi}</p>`;
                    question = 'Luas permukaan tabung';
                } else if (type === 'volume') {
                    knownData = `<p>‚Ä¢ Jari-jari (r) = ${radius} cm</p><p>‚Ä¢ Tinggi (t) = ${height} cm</p><p>‚Ä¢ œÄ = ${pi}</p>`;
                    question = 'Volume tabung';
                } else if (type === 'height_from_surface') {
                    knownData = `<p>‚Ä¢ Luas permukaan (L) = ${surfaceArea.toFixed(2)} cm¬≤</p><p>‚Ä¢ Jari-jari (r) = ${radius} cm</p><p>‚Ä¢ œÄ = ${pi}</p>`;
                    question = 'Tinggi tabung (t)';
                } else if (type === 'radius_from_volume') {
                    knownData = `<p>‚Ä¢ Volume (V) = ${volume.toFixed(2)} cm¬≥</p><p>‚Ä¢ Tinggi (t) = ${height} cm</p><p>‚Ä¢ œÄ = ${pi}</p>`;
                    question = 'Jari-jari tabung (r)';
                } else if (type === 'height_from_volume') {
                    knownData = `<p>‚Ä¢ Volume (V) = ${volume.toFixed(2)} cm¬≥</p><p>‚Ä¢ Jari-jari (r) = ${radius} cm</p><p>‚Ä¢ œÄ = ${pi}</p>`;
                    question = 'Tinggi tabung (t)';
                }
                
                document.getElementById('step1Content').innerHTML = `
                    ${knownData}
                    <p>‚Ä¢ Yang ditanya: ${question}</p>
                `;
                document.getElementById('step1Content').style.display = 'block';
                document.getElementById('step1Btn').style.display = 'none';
                document.getElementById('step2Btn').style.display = 'inline-block';
            } else if (step === 2) {
                let formula = '';
                if (type === 'surface' || type === 'radius_from_surface' || type === 'height_from_surface') {
                    formula = 'L = 2œÄr(r + t)';
                } else {
                    formula = 'V = œÄr¬≤t';
                }
                
                document.getElementById('step2Content').innerHTML = `
                    <p><strong>Rumus yang digunakan:</strong></p>
                    <p class="text-lg font-bold">${formula}</p>
                `;
                document.getElementById('step2Content').style.display = 'block';
                document.getElementById('step2Btn').style.display = 'none';
                document.getElementById('step3Btn').style.display = 'inline-block';
            } else if (step === 3) {
                let substitution = '';
                
                if (type === 'surface') {
                    substitution = `
                        <p>L = 2œÄr(r + t)</p>
                        <p>L = 2 √ó ${pi} √ó ${radius} √ó (${radius} + ${height})</p>
                        <p>L = 2 √ó ${pi} √ó ${radius} √ó ${radius + height}</p>
                    `;
                } else if (type === 'volume') {
                    substitution = `
                        <p>V = œÄr¬≤t</p>
                        <p>V = ${pi} √ó ${radius}¬≤ √ó ${height}</p>
                        <p>V = ${pi} √ó ${radius * radius} √ó ${height}</p>
                    `;
                } else if (type === 'height_from_surface') {
                    substitution = `
                        <p>L = 2œÄr(r + t)</p>
                        <p>${surfaceArea.toFixed(2)} = 2 √ó ${pi} √ó ${radius} √ó (${radius} + t)</p>
                        <p>${surfaceArea.toFixed(2)} = ${2 * piValue * radius} √ó (${radius} + t)</p>
                    `;
                } else if (type === 'radius_from_volume') {
                    substitution = `
                        <p>V = œÄr¬≤t</p>
                        <p>${volume.toFixed(2)} = ${pi} √ó r¬≤ √ó ${height}</p>
                        <p>r¬≤ = ${volume.toFixed(2)} √∑ (${pi} √ó ${height})</p>
                    `;
                } else if (type === 'height_from_volume') {
                    substitution = `
                        <p>V = œÄr¬≤t</p>
                        <p>${volume.toFixed(2)} = ${pi} √ó ${radius}¬≤ √ó t</p>
                        <p>${volume.toFixed(2)} = ${pi} √ó ${radius * radius} √ó t</p>
                    `;
                }
                
                document.getElementById('step3Content').innerHTML = substitution;
                document.getElementById('step3Content').style.display = 'block';
                document.getElementById('step3Btn').style.display = 'none';
                document.getElementById('step4Btn').style.display = 'inline-block';
            } else if (step === 4) {
                let calculation = '';
                
                if (type === 'surface') {
                    const result = 2 * piValue * radius * (radius + height);
                    calculation = `
                        <p>L = ${2 * radius * (radius + height)} √ó ${pi}</p>
                        <p>L = ${result.toFixed(2)} cm¬≤</p>
                        <p class="font-bold text-green-600">Jadi, luas permukaan tabung adalah ${result.toFixed(2)} cm¬≤</p>
                    `;
                } else if (type === 'volume') {
                    const result = piValue * radius * radius * height;
                    calculation = `
                        <p>V = ${radius * radius * height} √ó ${pi}</p>
                        <p>V = ${result.toFixed(2)} cm¬≥</p>
                        <p class="font-bold text-green-600">Jadi, volume tabung adalah ${result.toFixed(2)} cm¬≥</p>
                    `;
                } else if (type === 'height_from_surface') {
                    calculation = `
                        <p>${radius} + t = ${surfaceArea.toFixed(2)} √∑ ${2 * piValue * radius}</p>
                        <p>${radius} + t = ${(surfaceArea / (2 * piValue * radius)).toFixed(2)}</p>
                        <p>t = ${(surfaceArea / (2 * piValue * radius) - radius).toFixed(2)}</p>
                        <p class="font-bold text-green-600">Jadi, tinggi tabung adalah ${height} cm</p>
                    `;
                } else if (type === 'radius_from_volume') {
                    calculation = `
                        <p>r¬≤ = ${volume.toFixed(2)} √∑ ${(piValue * height).toFixed(2)}</p>
                        <p>r¬≤ = ${(volume / (piValue * height)).toFixed(2)}</p>
                        <p>r = ‚àö${(volume / (piValue * height)).toFixed(2)} = ${radius} cm</p>
                        <p class="font-bold text-green-600">Jadi, jari-jari tabung adalah ${radius} cm</p>
                    `;
                } else if (type === 'height_from_volume') {
                    calculation = `
                        <p>t = ${volume.toFixed(2)} √∑ (${pi} √ó ${radius * radius})</p>
                        <p>t = ${volume.toFixed(2)} √∑ ${(piValue * radius * radius).toFixed(2)}</p>
                        <p>t = ${height} cm</p>
                        <p class="font-bold text-green-600">Jadi, tinggi tabung adalah ${height} cm</p>
                    `;
                }
                
                document.getElementById('step4Content').innerHTML = calculation;
                document.getElementById('step4Content').style.display = 'block';
                document.getElementById('step4Btn').style.display = 'none';
            }
        }

        // Generate all practice problems (10 questions)
        function generateAllPractice() {
            const container = document.getElementById('practiceContainer');
            container.innerHTML = '';
            
            // Generate 8 problems: 2 surface, 2 volume, 2 height from surface, 1 radius from volume, 1 height from volume
            const problemTypes = [
                'surface', 'surface', 
                'volume', 'volume',
                'height_from_surface', 'height_from_surface',
                'radius_from_volume',
                'height_from_volume'
            ];
            
            problemTypes.forEach((type, index) => {
                const data = generateRandomValues();
                const questionNumber = index + 1;
                
                let problemText = '';
                let unit = '';
                let correctAnswer = 0;
                let givenData = { ...data };
                
                if (type === 'surface') {
                    problemText = `Sebuah tabung memiliki jari-jari ${data.radius} cm dan tinggi ${data.height} cm. Hitunglah luas permukaan tabung tersebut! (œÄ = ${data.pi})`;
                    unit = 'cm¬≤';
                    correctAnswer = 2 * data.piValue * data.radius * (data.radius + data.height);
                } else if (type === 'volume') {
                    problemText = `Sebuah tabung memiliki jari-jari ${data.radius} cm dan tinggi ${data.height} cm. Hitunglah volume tabung tersebut! (œÄ = ${data.pi})`;
                    unit = 'cm¬≥';
                    correctAnswer = data.piValue * data.radius * data.radius * data.height;
                } else if (type === 'height_from_surface') {
                    const surfaceArea = 2 * data.piValue * data.radius * (data.radius + data.height);
                    givenData.surfaceArea = surfaceArea;
                    problemText = `Sebuah tabung memiliki luas permukaan ${surfaceArea.toFixed(2)} cm¬≤ dan jari-jari ${data.radius} cm. Hitunglah tinggi tabung tersebut! (œÄ = ${data.pi})`;
                    unit = 'cm';
                    correctAnswer = data.height;
                } else if (type === 'radius_from_volume') {
                    const volume = data.piValue * data.radius * data.radius * data.height;
                    givenData.volume = volume;
                    problemText = `Sebuah tabung memiliki volume ${volume.toFixed(2)} cm¬≥ dan tinggi ${data.height} cm. Hitunglah jari-jari tabung tersebut! (œÄ = ${data.pi})`;
                    unit = 'cm';
                    correctAnswer = data.radius;
                } else if (type === 'height_from_volume') {
                    const volume = data.piValue * data.radius * data.radius * data.height;
                    givenData.volume = volume;
                    problemText = `Sebuah tabung memiliki volume ${volume.toFixed(2)} cm¬≥ dan jari-jari ${data.radius} cm. Hitunglah tinggi tabung tersebut! (œÄ = ${data.pi})`;
                    unit = 'cm';
                    correctAnswer = data.height;
                }
                
                const typeLabels = {
                    'surface': 'Luas Permukaan',
                    'volume': 'Volume',
                    'height_from_surface': 'Cari t dari L',
                    'radius_from_volume': 'Cari r dari V',
                    'height_from_volume': 'Cari t dari V'
                };
                
                const questionHTML = `
                    <div class="step-box mb-6" id="question${questionNumber}">
                        <h4 class="font-bold mb-3">Soal ${questionNumber} - ${typeLabels[type]}</h4>
                        <p class="font-semibold mb-4">${problemText}</p>
                        
                        <div class="mb-4">
                            <label for="answer${questionNumber}" class="block font-semibold mb-2">Jawaban Anda:</label>
                            <input type="number" id="answer${questionNumber}" class="input-field" placeholder="0" step="0.01">
                            <span class="ml-2 font-medium">${unit}</span>
                            <button class="btn-secondary ml-4" onclick="checkSingleAnswer(${questionNumber}, ${correctAnswer}, '${type}', ${data.radius}, ${data.height}, '${data.pi}', ${data.piValue}, ${givenData.surfaceArea || 0}, ${givenData.volume || 0})">‚úÖ Periksa</button>
                        </div>
                        
                        <div id="result${questionNumber}" style="display: none;" class="answer-box mb-3">
                            <p id="resultText${questionNumber}" class="font-semibold"></p>
                        </div>
                        
                        <div id="solution${questionNumber}" style="display: none;" class="answer-box">
                            <h5 class="font-bold mb-2">üìù Penyelesaian Detail:</h5>
                            <div id="solutionContent${questionNumber}"></div>
                        </div>
                        
                        <button id="toggleBtn${questionNumber}" class="btn-secondary mt-2" onclick="toggleSolution(${questionNumber}, '${type}', ${data.radius}, ${data.height}, '${data.pi}', ${data.piValue}, ${givenData.surfaceArea || 0}, ${givenData.volume || 0})" style="display: none;">üëÅÔ∏è Lihat Penyelesaian</button>
                    </div>
                `;
                
                container.innerHTML += questionHTML;
            });
        }

        // Check single answer
        function checkSingleAnswer(questionNum, correctAnswer, type, radius, height, pi, piValue, surfaceArea = 0, volume = 0) {
            const userAnswer = parseFloat(document.getElementById(`answer${questionNum}`).value);
            const tolerance = correctAnswer * 0.01; // 1% tolerance
            const isCorrect = Math.abs(userAnswer - correctAnswer) <= tolerance;
            
            const resultDiv = document.getElementById(`result${questionNum}`);
            const resultText = document.getElementById(`resultText${questionNum}`);
            const toggleBtn = document.getElementById(`toggleBtn${questionNum}`);
            
            if (isCorrect) {
                resultText.innerHTML = `‚úÖ <strong>Benar!</strong> Jawaban Anda: ${userAnswer}, Jawaban yang benar: ${correctAnswer.toFixed(2)}`;
                resultDiv.style.backgroundColor = '#d4edda';
                resultDiv.style.borderColor = '#c3e6cb';
                resultDiv.style.color = '#155724';
            } else {
                resultText.innerHTML = `‚ùå <strong>Kurang tepat.</strong> Jawaban Anda: ${userAnswer}, Jawaban yang benar: ${correctAnswer.toFixed(2)}`;
                resultDiv.style.backgroundColor = '#f8d7da';
                resultDiv.style.borderColor = '#f5c6cb';
                resultDiv.style.color = '#721c24';
            }
            
            resultDiv.style.display = 'block';
            toggleBtn.style.display = 'inline-block';
        }

        // Toggle solution for individual question
        function toggleSolution(questionNum, type, radius, height, pi, piValue, surfaceArea = 0, volume = 0) {
            const solutionDiv = document.getElementById(`solution${questionNum}`);
            const toggleBtn = document.getElementById(`toggleBtn${questionNum}`);
            
            if (solutionDiv.style.display === 'none') {
                let solution = '';
                
                if (type === 'surface') {
                    const result = 2 * piValue * radius * (radius + height);
                    solution = `
                        <p><strong>Diketahui:</strong> r = ${radius} cm, t = ${height} cm, œÄ = ${pi}</p>
                        <p><strong>Rumus:</strong> L = 2œÄr(r + t)</p>
                        <p><strong>Penyelesaian:</strong></p>
                        <p>L = 2 √ó ${pi} √ó ${radius} √ó (${radius} + ${height}) = <strong>${result.toFixed(2)} cm¬≤</strong></p>
                    `;
                } else if (type === 'volume') {
                    const result = piValue * radius * radius * height;
                    solution = `
                        <p><strong>Diketahui:</strong> r = ${radius} cm, t = ${height} cm, œÄ = ${pi}</p>
                        <p><strong>Rumus:</strong> V = œÄr¬≤t</p>
                        <p><strong>Penyelesaian:</strong></p>
                        <p>V = ${pi} √ó ${radius}¬≤ √ó ${height} = <strong>${result.toFixed(2)} cm¬≥</strong></p>
                    `;
                } else if (type === 'height_from_surface') {
                    solution = `
                        <p><strong>Diketahui:</strong> L = ${surfaceArea.toFixed(2)} cm¬≤, r = ${radius} cm, œÄ = ${pi}</p>
                        <p><strong>Rumus:</strong> L = 2œÄr(r + t)</p>
                        <p><strong>Penyelesaian:</strong></p>
                        <p>${surfaceArea.toFixed(2)} = 2 √ó ${pi} √ó ${radius} √ó (${radius} + t)</p>
                        <p>(${radius} + t) = ${surfaceArea.toFixed(2)} √∑ ${(2 * piValue * radius).toFixed(2)}</p>
                        <p><strong>t = ${height} cm</strong></p>
                    `;
                } else if (type === 'radius_from_volume') {
                    solution = `
                        <p><strong>Diketahui:</strong> V = ${volume.toFixed(2)} cm¬≥, t = ${height} cm, œÄ = ${pi}</p>
                        <p><strong>Rumus:</strong> V = œÄr¬≤t</p>
                        <p><strong>Penyelesaian:</strong></p>
                        <p>r¬≤ = ${volume.toFixed(2)} √∑ (${pi} √ó ${height})</p>
                        <p>r = ‚àö${(volume / (piValue * height)).toFixed(2)} = <strong>${radius} cm</strong></p>
                    `;
                } else if (type === 'height_from_volume') {
                    solution = `
                        <p><strong>Diketahui:</strong> V = ${volume.toFixed(2)} cm¬≥, r = ${radius} cm, œÄ = ${pi}</p>
                        <p><strong>Rumus:</strong> V = œÄr¬≤t</p>
                        <p><strong>Penyelesaian:</strong></p>
                        <p>t = ${volume.toFixed(2)} √∑ (${pi} √ó ${radius}¬≤)</p>
                        <p>t = ${volume.toFixed(2)} √∑ ${(piValue * radius * radius).toFixed(2)} = <strong>${height} cm</strong></p>
                    `;
                }
                
                document.getElementById(`solutionContent${questionNum}`).innerHTML = solution;
                solutionDiv.style.display = 'block';
                toggleBtn.textContent = 'üôà Sembunyikan Penyelesaian';
            } else {
                solutionDiv.style.display = 'none';
                toggleBtn.textContent = 'üëÅÔ∏è Lihat Penyelesaian';
            }
        }

        // Initialize canvas on page load
        window.addEventListener('load', () => {
            drawCylinder();
            // Render MathJax
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9968765824809a70',t:'MTc2MTgwMTYxNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
